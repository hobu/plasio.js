<html>
<body>
    <div id="app" style="width:800px;height:600px;"></div>

    <script src="plasio-renderer.js"></script>

    <script>
        var r = renderer.core.createRenderer(document.getElementById("app"));

        var lid = r.addPropertyListener(["view"], function(st) {
            console.log("Property changed to", st);
        });

        console.log("Listener ID:", lid);

        r.setClearColor(0, 0, 0);
        r.setEyePosition(75, 50, 75);
        r.setTargetPosition(0, 0, 0);

        r.removePropertyListener(lid);

        var pointSize = 3 + 3 + 2;
        var dim = 100;
        var numPoints = dim * dim;
        var arr = new Float32Array(pointSize * numPoints);

        var i = 0;
        for (var o = 0 ; o < numPoints ; o ++) {
            var x = Math.floor(o % dim) - (dim / 2);
            var y = Math.floor(o / dim) - (dim / 2);
            var z = 0;

            arr[i + 0] = x; arr[i + 1] = y ; arr[i + 2] = z; i += 3; // position
            arr[i + 0] = 1; arr[i + 1] = 1 ; arr[i + 2] = 1; i += 3; // color
            arr[i + 1] = 0; // intensity
            arr[i + 1] = 0; // classification
            i += 2;
        }

        r.addPointBuffer("mybuff", arr);
        var f = 0;
        var step = function() {
            f += 0.001;
            var x = Math.sin(f) * 100.0;
            var z = Math.cos(f) * 100.0;

            //r.setEyePosition(x, 50, z);

            //requestAnimationFrame(step);
        };
        requestAnimationFrame(step);

        setTimeout(function() {
                r.removePointBuffer("mybuff");
        }, 2000);

/*
        var a = true;
        setInterval(function() {
                if (a)
                    r.addScaleObject("resources/scale-objects/EmpireStateBuilding/EmpireStateBuilding.js", 0, 0, 0);
                else
                    r.removeAllScaleObjects();

                a = !a;
        }, 2000);
        */

        /*
        var f = 0.0;
        setInterval(function() {
            var x = Math.sin(f) * 1000.0,
                z = Math.cos(f) * 1000.0;

            r.setEyePosition(x, 100, z);
            f += Math.PI/10;
        }, 500);
        */
    </script>

</body>
</html>
